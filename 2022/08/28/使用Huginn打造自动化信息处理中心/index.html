<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>使用Huginn打造自动化信息处理中心 | 鹏哥的Blog</title><meta name="author" content="peng"><meta name="copyright" content="peng"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="一.Huginn简介在北欧神话中，奥丁的肩膀上坐着两只乌鸦，一只名叫 Huginn，一只名叫 Muninn。这两只乌鸦告诉奥丁他们的所见所闻，毫无遗漏。奥丁在黎明时派出它们，它们飞遍全世界然后在晚餐之前回来汇报，因此，奥丁能知晓很多事情。在Huginn的项目主页上，作者对它有详细的介绍。我们同样可以通过Huginn创建不同的代理，通过这些代理发送HTTP请求获得相关数据，然后将获取到的数据进行处理">
<meta property="og:type" content="article">
<meta property="og:title" content="使用Huginn打造自动化信息处理中心">
<meta property="og:url" content="https://lxlfpeng.github.io/2022/08/28/%E4%BD%BF%E7%94%A8Huginn%E6%89%93%E9%80%A0%E8%87%AA%E5%8A%A8%E5%8C%96%E4%BF%A1%E6%81%AF%E5%A4%84%E7%90%86%E4%B8%AD%E5%BF%83/index.html">
<meta property="og:site_name" content="鹏哥的Blog">
<meta property="og:description" content="一.Huginn简介在北欧神话中，奥丁的肩膀上坐着两只乌鸦，一只名叫 Huginn，一只名叫 Muninn。这两只乌鸦告诉奥丁他们的所见所闻，毫无遗漏。奥丁在黎明时派出它们，它们飞遍全世界然后在晚餐之前回来汇报，因此，奥丁能知晓很多事情。在Huginn的项目主页上，作者对它有详细的介绍。我们同样可以通过Huginn创建不同的代理，通过这些代理发送HTTP请求获得相关数据，然后将获取到的数据进行处理">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://lxlfpeng.github.io/images/about_avatar.webp">
<meta property="article:published_time" content="2022-08-27T16:00:00.000Z">
<meta property="article:modified_time" content="2025-04-12T15:02:01.855Z">
<meta property="article:author" content="peng">
<meta property="article:tag" content="Rss">
<meta property="article:tag" content="Huginn">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://lxlfpeng.github.io/images/about_avatar.webp"><link rel="shortcut icon" href="/images/favicon.webp"><link rel="canonical" href="https://lxlfpeng.github.io/2022/08/28/%E4%BD%BF%E7%94%A8Huginn%E6%89%93%E9%80%A0%E8%87%AA%E5%8A%A8%E5%8C%96%E4%BF%A1%E6%81%AF%E5%A4%84%E7%90%86%E4%B8%AD%E5%BF%83/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '使用Huginn打造自动化信息处理中心',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/images/about_avatar.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">127</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">59</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">24</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories"><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background: linear-gradient(20deg, #0062be, #925696, #cc426e, #fb0347);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/images/nav_logo.webp" alt="Logo"><span class="site-name">鹏哥的Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">使用Huginn打造自动化信息处理中心</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories"><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">使用Huginn打造自动化信息处理中心</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2022-08-27T16:00:00.000Z" title="发表于 2022-08-28 00:00:00">2022-08-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/RSS%E8%AE%A2%E9%98%85/">RSS订阅</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">7.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>28分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="一-Huginn简介"><a href="#一-Huginn简介" class="headerlink" title="一.Huginn简介"></a>一.Huginn简介</h1><p>在北欧神话中，奥丁的肩膀上坐着两只乌鸦，一只名叫 Huginn，一只名叫 Muninn。这两只乌鸦告诉奥丁他们的所见所闻，毫无遗漏。奥丁在黎明时派出它们，它们飞遍全世界然后在晚餐之前回来汇报，因此，奥丁能知晓很多事情。在<a target="_blank" rel="noopener" href="https://github.com/huginn/huginn">Huginn</a>的项目主页上，作者对它有详细的介绍。我们同样可以通过Huginn创建不同的代理，通过这些代理发送HTTP请求获得相关数据，然后将获取到的数据进行处理，就可以在互联网上面收集到各类我们需要的信息了。通过Huginn我们可以比较方便的实现如下功能:</p>
<ul>
<li>监控你关心的事项例如知乎、微博、贴吧等平台指定的信息，一旦监控到信息，邮件通知你。</li>
<li>监控各大购物平台商品信息，一旦发现折扣信息，邮件通知你。</li>
<li>支持各种形式的发送和接收 WebHooks。</li>
<li>抓取网页内容并且在它们发生变化时发送邮件给你。</li>
<li>将获得的数据进行相应的格式处理并输出，例如RSS。</li>
<li>跟踪天气的变化，如果监测到明天要下雨或下雪，就会发邮件提醒你。</li>
</ul>
<p>总得来说，Huginn可以帮助我们做好两件事情，一是定制化推送或提醒，二是聚合数据。</p>
<h3 id="1-定制化推送或提醒"><a href="#1-定制化推送或提醒" class="headerlink" title="1.定制化推送或提醒"></a>1.定制化推送或提醒</h3><p>首先，定制化推送或提醒就像你平时设定闹钟一样，设定好时间或条件后，当时间或条件满足时，Huginn就会把信息推送给你，或提醒你该去做某件事情。比如说，明天下雨，提醒你带伞；电视剧或漫画更新，提醒你去观看或直接推送给你；感兴趣的商品降价，提醒你去购买；发生有趣的热点新闻，也会推送给你…诸如此类生活中很多零散的信息地处理，我们每天都在接收并处理这些信息。</p>
<h3 id="2-聚合数据"><a href="#2-聚合数据" class="headerlink" title="2.聚合数据"></a>2.聚合数据</h3><p>聚合数据是指在将自己关注的包括但不仅限于微信公众号、知乎、简书、豆瓣、微博、Instagram等相关平台的资讯信息收集起来，在同一个平台进行阅读，RSS技术就能实现上述的功能，但是因为很多网站官方都没有提供Rss支持，那么可以通过Huginn将自己关注的信息渠道都制作成一个个RSS源，然后在RSS阅读器中集中阅读。</p>
<h1 id="二-安装Huginn"><a href="#二-安装Huginn" class="headerlink" title="二.安装Huginn"></a>二.安装Huginn</h1><h3 id="1-常规手动安装Huginn"><a href="#1-常规手动安装Huginn" class="headerlink" title="1.常规手动安装Huginn"></a>1.常规手动安装Huginn</h3><p>如果是常规安装方式，需要安装依赖包、ruby 环境、数据库、nginx、huginn 及各种配置。容易出错，因此不推荐此种安装方式，具体安装步骤可以参考<a target="_blank" rel="noopener" href="https://github.com/huginn/huginn/wiki/Novice-setup-guide">官网教程</a>。</p>
<h3 id="2-Docker安装Huginn-推荐"><a href="#2-Docker安装Huginn-推荐" class="headerlink" title="2.Docker安装Huginn(推荐)"></a>2.Docker安装Huginn(推荐)</h3><ol>
<li><p>首先你需要安装配置好Docker环境。</p>
</li>
<li><p>然后通过 docker 来部署:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker search huginn/huginn</span><br><span class="line">docker pull huginn/huginn</span><br><span class="line">docker run -it -p 3000:3000 huginn/huginn</span><br></pre></td></tr></table></figure>
</li>
<li><p>然后在浏览器打开<code>http://localhost:3000</code>即可看到效果，使用默认账号登录：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用户名： admin</span><br><span class="line">密码：password</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-Huginn更换Mysql数据库"><a href="#3-Huginn更换Mysql数据库" class="headerlink" title="3.Huginn更换Mysql数据库"></a>3.Huginn更换Mysql数据库</h3><p>安装Huginn时会附带有一个轻量的数据库，但Huginn一删里面的数据就没了，所以非常有必要将Huginn的数据存储在mysql中可以方便我们对数据进行管理。</p>
<ol>
<li><p>在docker中配置好mysql和huginn。</p>
</li>
<li><p>创建huginn容器时指定mysql数据库的信息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run  --name huginn -p 3000:3000 -e MYSQL_PORT_3306_TCP_ADDR=172.0.0.1 -e HUGINN_DATABASE_NAME=huginn -e HUGINN_DATABASE_USERNAME=root -e HUGINN_DATABASE_PASSWORD=123456 huginn/huginn</span><br></pre></td></tr></table></figure>
</li>
<li><p>最后在浏览器中输入http:&#x2F;&#x2F;你的服务器IP:3000并访问。</p>
</li>
</ol>
<h3 id="4-将huginn部署到-Heroku"><a href="#4-将huginn部署到-Heroku" class="headerlink" title="4.将huginn部署到 Heroku"></a>4.将huginn部署到 Heroku</h3><p>[Heroku](<a target="_blank" rel="noopener" href="https://www.heroku.com/about">About Heroku | Heroku</a>)是一个支持多种编程语言的云平台即服务，该平台提供了一些免费的云计算服务，如果我们不想自己购买云服务器，可以将huginn部署到Heroku。如果你要使用免费方案的话，你需要注意以下几点：</p>
<ul>
<li>使用 Heroku 免费方案的用户，其每个网站在 30 分钟内无人访问后便会自动关闭，再有人访问时才会自动重新打开，因此为了使 Huginn 网站能长时间运行，可以使用类似<a target="_blank" rel="noopener" href="https://uptimerobot.com/">uptimerobot</a> 的<a target="_blank" rel="noopener" href="https://cloud.tencent.com/product/cat?from=10680">网站监控</a>服务，不停地ping你的 Huginn 网站地址；</li>
<li>Heroku 免费方案只允许用户所有的应用每个月运行的总时长不超过 550 个小时（绑定信用卡的用户可额外再获得 450 个小时），这意味着你无法保证部署好的 Huginn 网站每个月每天都在运行，因此，你可选择绑定信用卡，或者让你的 Huginn 网站每天只允许 18 个小时，这样的话，你的网站每天都可以在运行；</li>
<li>Heroku免费方案提供给用户的 Postgres<a target="_blank" rel="noopener" href="https://cloud.tencent.com/solution/database?from=10680">数据库</a>只有5M，存储的数据不能超过 10000 行，因此你需要控制 Agent 生成的事件的保留周期，同时限制数据库中 Agent 日志文件的长度，比如<code>heroku config:set AGENT_LOG_LENGTH=20</code>。</li>
<li>Huginn安装在heroku的过程中默认使用的是SendGrid的邮箱服务器，这还需要我们添加SendGrid插件才能正常使用，但是添加插件需要先添加信用卡，因此，非信用卡用户无法使用SendGrid的邮箱服务器，建议添加其它邮箱服务器，比如，gmail邮箱服务器。</li>
</ul>
<h5 id="部署到Heroku的操作步骤："><a href="#部署到Heroku的操作步骤：" class="headerlink" title="部署到Heroku的操作步骤："></a>部署到Heroku的操作步骤：</h5><ol>
<li>注册<a target="_blank" rel="noopener" href="https://www.heroku.com/">Heroku</a> 平台账号，然后下载安装<a target="_blank" rel="noopener" href="https://toolbelt.heroku.com/">Heroku Toolbelt</a>；</li>
<li>远程登录 Heroku：<code>heroku login</code></li>
<li>创建 app：<code>heroku create xxx</code>（xxx 为 app 的名字，下同）；</li>
<li>将 app 下载到本地：<code>heroku git:clone --app xxx</code></li>
<li>将<a target="_blank" rel="noopener" href="https://github.com/cantino/huginn">huginn</a> 源代码全部下载拷贝到本地 app 的文件夹内；</li>
<li>进入 app 文件目录，依次执行命令：<code>cp .env.example .env</code> 和<code>bundle</code>；</li>
<li>提交代码变更：<code>git add .</code>、<code>git commit -am &#39;commit code&#39;</code>；</li>
<li>最后，执行脚本：<code>bin/setup_heroku</code>，完成部署。</li>
</ol>
<blockquote>
<p>如果嫌自己部署过于麻烦，也可以参考[Huginn官方(<a target="_blank" rel="noopener" href="https://github.com/huginn/huginn#deployment)%E7%9A%84%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2%E5%88%B0Heroku%E5%B9%B3%E5%8F%B0%E7%9A%84%E6%96%B9%E6%A1%88%E3%80%82">https://github.com/huginn/huginn#deployment)的一键部署到Heroku平台的方案。</a></p>
</blockquote>
<h5 id="使用自己的邮箱服务器"><a href="#使用自己的邮箱服务器" class="headerlink" title="使用自己的邮箱服务器"></a>使用自己的邮箱<a target="_blank" rel="noopener" href="https://cloud.tencent.com/product/cvm?from=10680">服务器</a></h5><p>在安装过程中默认使用的是 SendGrid 的邮箱服务器（安装后需要自行配置），你也可以使用其他邮箱服务器，下面以谷歌邮箱服务器为例，需要进行以下配置：</p>
<p><code>heroku config:set SMTP_DOMAIN=google.com</code><br><code>heroku config:set</code><a target="_blank" rel="noopener" href="https://huginn.cn/cdn-cgi/l/email-protection"><code>[email protected]</code></a><br><code> heroku config:set SMTP_PASSWORD=somepassword</code><br><code> heroku config:set SMTP_SERVER=smtp.gmail.com</code><br><code>heroku config:set</code><a target="_blank" rel="noopener" href="https://huginn.cn/cdn-cgi/l/email-protection"><code>[email protected]</code></a><code> # 指定显示的发件人邮箱地址</code></p>
<h1 id="三-Huginn基本概念"><a href="#三-Huginn基本概念" class="headerlink" title="三.Huginn基本概念"></a>三.Huginn基本概念</h1><p>如果将Huginn比如成一个数据加工工厂，每个Agents就像是一个个具有不同功能的车间，Agent可以接收数据并对数据进行加工，然后将加工好的数据输出。一组串联起来的Agents通过不断传递加工Event(产品)组成了一条流水线(scenarios)。</p>
<h3 id="1-Agent："><a href="#1-Agent：" class="headerlink" title="1.Agent："></a>1.Agent：</h3><p>Agent就是一个代理，例如抓取网页数据，清洗网页数据，输出为Rss源，这里的每一步都相当于是一个不同种类的车间，他们可以彼此依赖形成流水线，也可以单独工作。</p>
<h3 id="2-Scenario："><a href="#2-Scenario：" class="headerlink" title="2.Scenario："></a>2.Scenario：</h3><p>Scenario就是一系列Agent的集合，就相当于是包含了很多车间的流水线，主要是对一系列Agent的集合进行归类，方便识别。</p>
<h3 id="3-Event："><a href="#3-Event：" class="headerlink" title="3.Event："></a>3.Event：</h3><p>每一个Agent执行一次，输出就是Event，相当于是车间加工出来的产品，前一个<code>车间/Agent</code>输出的Event可以传递给下一个<code>车间/Agent</code>使用，再次进行加工。</p>
<blockquote>
<p>显然，Huginn能做什么，不能做什么，关键看它提供了哪些Agent。</p>
</blockquote>
<h1 id="四-入门实例-Huginn下雨天通知带雨具"><a href="#四-入门实例-Huginn下雨天通知带雨具" class="headerlink" title="四.入门实例-Huginn下雨天通知带雨具"></a>四.入门实例-Huginn下雨天通知带雨具</h1><p>例如，我们想把某个城市的天气预报数据抓取，对数据进行分析，判断明天是否会下雨，然后通过邮件提前通知明天带雨伞。 那么，我们需要写三个Agents，第一个Agent抓取天气预报的数据，第二个Agent会对天气预报的数据进行判断，判断明天是否会下雨， 最后一个Agent通过邮件通知明天下雨需要带雨伞。在Huginn中，会按照下图所示的流程进行工作：<br><img src="/images/4e11b363667bd5a3b02466c7dca0581e.webp" alt="image.png"></p>
<h3 id="1-创建抓取天气数据的Agent"><a href="#1-创建抓取天气数据的Agent" class="headerlink" title="1.创建抓取天气数据的Agent"></a>1.创建抓取天气数据的Agent</h3><h4 id="创建Agent代理"><a href="#创建Agent代理" class="headerlink" title="创建Agent代理"></a>创建Agent代理</h4><p>先登录Huginn，然后在左上角处点击创建新代理（New Agent）:<br><img src="/images/9d620e45030a39d0d00310e0945d0856.webp" alt="image.png"></p>
<h4 id="选择代理类型"><a href="#选择代理类型" class="headerlink" title="选择代理类型"></a>选择代理类型</h4><p>由于我们是对html网页类型进行解析,因此创建一个Website的代理:<br><img src="/images/b9eeea1adad51ac21ec6544a6de3026a.webp" alt="image.png"></p>
<h4 id="基本信息填写"><a href="#基本信息填写" class="headerlink" title="基本信息填写"></a>基本信息填写</h4><p><img src="/images/e0f7887ac0bf703e39d5c8d7765ebf91.webp" alt="image.png"></p>
<ul>
<li>红色部分为基本信息功能。</li>
<li>黄色部分为指导说明文档。</li>
<li>蓝色部分为抓取选项配置。</li>
<li>绿色部分为调试保存功能。</li>
</ul>
<p>下面先看基本信息区主要有如下几个选项:</p>
<ul>
<li>Type(代理类型):选择代理的类型上一步我们选择的是Website,因此这里就不再选择了。</li>
<li>Name(名称)：给这个 agent 取个名字，自己随便起一个就行。</li>
<li>Schedule(日程)：调度周期，表示在什么时候自动执行这个 agent，比如 Every 1d 表示每一天执行一次、Every 2h 表示每2小时执行一次、8pm 表示每天下午8点执行等等；选择 3pm，每天下午3点执行一次，根据实际需要设置，比如你抓取的内容更新比较频繁，就把时间间隔设置的小一些，Every 5m、Every 10m之类的。</li>
<li>Controllers(控制):除了系统定义之外，此代理上面的计划可以由这些用户定义的代理运行或控制，不用填写。</li>
<li>Keep events(事件保留时间)：表示事件保留的时间；我们从网页上面获取到的信息都是一个 event，Huginn会把这些 event 保留在本地，你可以通过这个参数来设置这些 events 在本地保留多少时间，超过这个时间，Huginn会把数据清除，暂时设置成forever永不清除。</li>
<li>Sources(来源端)：表示这个 agent 处理的数据来源是哪个 agent。我们现在创建的 agent 是第一个 agent，所以不需要从其他 agent 传递数据（也就是上面说的 events）过来，所以这个留空。</li>
<li>Receivers(接收端)：表示这个 agent 处理完数据之后把这些数据传入到哪个 agent。用来转化数据，数据转化完之后，可能还需要其他 agent 把这些数据做进一步的转化。</li>
<li>Scenarios(场景分类)：表示这个 agent 是数据哪个 Scenario 的，就是把这一系列的代理打个组这个分类，比较方便查看。</li>
</ul>
<h4 id="Options-配置填写"><a href="#Options-配置填写" class="headerlink" title="Options 配置填写"></a>Options 配置填写</h4><p>Options：这个非常关键，就是通过这个配置文件（JSON）来进行网络请求和数据解析相关的操作的，Options 配置其实就是一个 JSON 文件，最右上角的切换视图（Toggle View）可以切换视图和源码的编辑模式:<br><img src="/images/bd33621c497b08aa2bcca0b7ea92541d.webp" alt="image.png"><br>Website Agent 的 Options 主要的元素有如下：</p>
<ul>
<li>url：网站地址，表示我需要从哪个网站获取数据。</li>
<li>type：数据解析的类型，支持的类型有 <code>xml</code>、<code>html</code>、<code>json</code>、<code>text</code> 四种，当前网址返回的是 html，所以这里我们填写 <code>html</code>。如果其他场景，返回的类型可能就是 <code>json</code> 或者 <code>xml</code>了,需要具体分析。</li>
<li>mode：表示获取数据的模式，这里选择 <code>on_change</code>。<ul>
<li>on_change：在数据有更改时才会获取作为 events。</li>
<li>merge：把新数据和输入的数据进行合并。</li>
<li>all：获取所有数据。</li>
</ul>
</li>
<li>extract：用来配置（JSON）从这个网站解析出真正我们想要的数据。如果 <code>type</code> 是 <code>html</code>，则每个数据通过 <code>css</code> 选择器或者 <code>xpath</code> 来定位元素的位置然后解析出真正的数据。</li>
</ul>
<p>打开<a target="_blank" rel="noopener" href="http://www.weather.com.cn/weather1d/101280601.shtml">深圳天气预报,深圳7天天气预报,深圳15天天气预报,深圳天气查询 (weather.com.cn)</a>，f12呼出开发者工具，然后分析网页的内容，可以看到元素对应的关系如下:<br><img src="/images/385754b30176d50aa3a3a330fb28da0f.webp" alt="image.png"></p>
<p>根据如上网页的对应关系，编写Options如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;expected_update_period_in_days&quot;: &quot;2&quot;,</span><br><span class="line">	&quot;url&quot;: &quot;http://www.weather.com.cn/weather1d/101280601.shtml&quot;,</span><br><span class="line">	&quot;type&quot;: &quot;html&quot;,</span><br><span class="line">	&quot;mode&quot;: &quot;on_change&quot;,</span><br><span class="line">	&quot;extract&quot;: &#123;</span><br><span class="line">		&quot;day&quot;: &#123;</span><br><span class="line">			&quot;css&quot;: &quot;#today .clearfix li[1] .wea&quot;,</span><br><span class="line">			&quot;value&quot;: &quot;text()&quot;</span><br><span class="line">		&#125;,</span><br><span class="line">		&quot;day_temperature&quot;: &#123;</span><br><span class="line">			&quot;css&quot;: &quot;#today .clearfix li[1] .tem span&quot;,</span><br><span class="line">			&quot;value&quot;: &quot;text()&quot;</span><br><span class="line">		&#125;,</span><br><span class="line">		&quot;day_wind&quot;: &#123;</span><br><span class="line">			&quot;css&quot;: &quot;#today .clearfix li[1] .win span&quot;,</span><br><span class="line">			&quot;value&quot;: &quot;normalize-space(.)&quot;</span><br><span class="line">		&#125;,</span><br><span class="line">		&quot;night&quot;: &#123;</span><br><span class="line">			&quot;css&quot;: &quot;#today .clearfix li[2] .tem span&quot;,</span><br><span class="line">			&quot;value&quot;: &quot;text()&quot;</span><br><span class="line">		&#125;,</span><br><span class="line">		&quot;night_temperature&quot;: &#123;</span><br><span class="line">			&quot;css&quot;: &quot;#today .clearfix li[2] .win span&quot;,</span><br><span class="line">			&quot;value&quot;: &quot;normalize-space(.)&quot;</span><br><span class="line">		&#125;,</span><br><span class="line">		&quot;night_wind&quot;: &#123;</span><br><span class="line">			&quot;css&quot;: &quot;#today .clearfix li[2] .wea&quot;,</span><br><span class="line">			&quot;value&quot;: &quot;text()&quot;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>获取抓取到的结果:<br><img src="/images/d49247b39a99490d3b699248b3204d72.webp" alt="image.png"></p>
<blockquote>
<p>如果想看抓取到的页面具体的数据有哪些可以在extract中定义一个<code>&quot;html内容&quot;: &#123;&quot;css&quot;: &quot;html&quot;,&quot;value&quot;: &quot;.&quot;&#125;</code>将html标签中的所有内容输出进行查看。</p>
</blockquote>
<p><strong>Json格式数据解析</strong></p>
<ol>
<li>如果网页获取到的是如下的JSon数据：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123; &quot;results&quot;: &#123;</span><br><span class="line">    &quot;data&quot;: [</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;title&quot;: &quot;Lorem ipsum 1&quot;,</span><br><span class="line">        &quot;description&quot;: &quot;Aliquam pharetra leo ipsum.&quot;</span><br><span class="line">        &quot;price&quot;: 8.95</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;title&quot;: &quot;Lorem ipsum 2&quot;,</span><br><span class="line">        &quot;description&quot;: &quot;Suspendisse a pulvinar lacus.&quot;</span><br><span class="line">        &quot;price&quot;: 12.99</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;title&quot;: &quot;Lorem ipsum 3&quot;,</span><br><span class="line">        &quot;description&quot;: &quot;Praesent ac arcu tellus.&quot;</span><br><span class="line">        &quot;price&quot;: 8.99</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>填写抓取规则：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;extract&quot;: &#123;</span><br><span class="line">  &quot;title&quot;: &#123; &quot;path&quot;: &quot;results.data[*].title&quot; &#125;,</span><br><span class="line">  &quot;description&quot;: &#123; &quot;path&quot;: &quot;results.data[*].description&quot; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>抓取到的数据：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;title&quot;: &quot;Lorem ipsum 1&quot;,</span><br><span class="line">    &quot;description&quot;: &quot;Aliquam pharetra leo ipsum.&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;title&quot;: &quot;Lorem ipsum 2&quot;,</span><br><span class="line">    &quot;description&quot;: &quot;Suspendisse a pulvinar lacus.&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;title&quot;: &quot;Lorem ipsum 3&quot;,</span><br><span class="line">    &quot;description&quot;: &quot;Praesent ac arcu tellus.&quot;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="2-过滤天气数据Agent"><a href="#2-过滤天气数据Agent" class="headerlink" title="2.过滤天气数据Agent"></a>2.过滤天气数据Agent</h3><h4 id="创建TriggerAgents"><a href="#创建TriggerAgents" class="headerlink" title="创建TriggerAgents"></a>创建TriggerAgents</h4><p>过滤Agent用的是<code>TriggerAgent</code>。建立一个TriggerAgent。把刚才创建的WeatherAgent设置为源。TriggerAgents 包含一套规则，所有这一切都必须为触发匹配。<img src="/images/237e3a183353f1f9b667320b2b75ec78.webp" alt="image.png"></p>
<h4 id="Agents配置填写"><a href="#Agents配置填写" class="headerlink" title="Agents配置填写"></a>Agents配置填写</h4><p>keep event这里选择的是false，意思是不生成过滤之后的事件，直接传递message的内容给下一个agent。如果你希望对过滤后余下的信息进一步利用，比如再次过滤之类，可以选择true以保留事件。<code>type</code>指的是类型，regex指的是正则匹配，系统会检测上一个agent生成的内容（这里选择的是<code>path：title</code>，意思是把传递过来的事件中的title作为过滤的对象），和<code>value</code>中内容进行比较，如果这个event中包含这些<code>value</code>，那么生成事件，否则不生成。<code>value</code>中的竖分割线指的是或的意思，出现其中任何一个词即可通过过滤器，生成事件。!regix 指的是不匹配，它会检测<code>path</code>和<code>value</code>的相似程度，如果<code>path</code>中出现<code>value</code>的值，则不输出，反之，则通过过滤器并输出、生成事件。<br><img src="/images/e835805aacad65d67eef63bbe220b980.webp" alt="image.png"></p>
<h3 id="3-通知用户的Agent"><a href="#3-通知用户的Agent" class="headerlink" title="3.通知用户的Agent"></a>3.通知用户的Agent</h3><p>将huginn event的内容推送到通知平台。这样的服务商比较不错的有两个：</p>
<ul>
<li>邮件agent。</li>
<li>slack agent。</li>
</ul>
<p>其中邮件推送最经济实惠，不受平台约束；slack是一个和企业微信比较像的国外交流软件，可能面临着封杀的危险，但是功能丰富，支持桌面端、Chrome插件、iOS和Android端，界面漂亮，并且可以自己选择把消息推送到哪一个群组。</p>
<h1 id="五-进阶实例抓取Github点赞最多的项目列表生成Rss"><a href="#五-进阶实例抓取Github点赞最多的项目列表生成Rss" class="headerlink" title="五.进阶实例抓取Github点赞最多的项目列表生成Rss"></a>五.进阶实例抓取Github点赞最多的项目列表生成Rss</h1><p>抓取Github数据生成Rss需要进行三个步骤也就是需要三个Agent:</p>
<ol>
<li><p>获取Github点赞最多的十条项目列表数据的Agent。</p>
</li>
<li><p>根据列表数据获取项目详情数据的Agent。</p>
</li>
<li><p>将数据组合生成Rss数据进行输出的Agent。<br><img src="/images/6fab76d1341a7d64be08158e6c4de123.webp" alt="image.png"></p>
</li>
</ol>
<blockquote>
<p>以下内容是针对静态网页的抓取步骤指南，如果需要抓取动态网页（大型网站有一些用的是动态，普通网站还是静态为主），其实就在以下步骤之前多一步，用Phantom Js Cloud Agent渲染动态网页成静态页面后接下文的步骤即可。</p>
</blockquote>
<h3 id="1-创建Agent抓取列表数据"><a href="#1-创建Agent抓取列表数据" class="headerlink" title="1.创建Agent抓取列表数据"></a>1.创建Agent抓取列表数据</h3><h4 id="新建列表页的Agent"><a href="#新建列表页的Agent" class="headerlink" title="新建列表页的Agent"></a>新建列表页的Agent</h4><p>先登录Huginn，然后在左上角处点击创建新代理（New Agent）:<br><img src="/images/22485c9c2daac7d6424c6f7e41df43ae.webp" alt="image.png"></p>
<h4 id="选择代理类型-1"><a href="#选择代理类型-1" class="headerlink" title="选择代理类型"></a>选择代理类型</h4><p>由于我们是对html网页类型进行解析，因此创建一个Website的代理:<br><img src="/images/e9d5588914faa28674f829fbda6228aa.webp" alt="image.png"></p>
<h4 id="基本信息填写-1"><a href="#基本信息填写-1" class="headerlink" title="基本信息填写"></a>基本信息填写</h4><p>抓取<a target="_blank" rel="noopener" href="https://github.com/search?q=stars:%3E10000">github star最多star的项目</a></p>
<ul>
<li><p>1.通过F12查看元素，可以看到左边每一条项目对应的是右边源代码里面class为repo-list的ul标签中的li标签，对应关系如下:<br><img src="/images/e0c8276eb2d0341155138040b97073d4.webp" alt="d1f1179bfdf64ca03593189516cf782.png"></p>
</li>
<li><p>2.编写解析规则，通过Css选择器和Xpath进行元素定位都可以。</p>
<ul>
<li><p>使用Css选择器进行元素定位取出数据:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;expected_update_period_in_days&quot;: &quot;2&quot;,</span><br><span class="line">  &quot;url&quot;: &quot;https://github.com/search?q=stars%3A%3E10000&quot;,</span><br><span class="line">  &quot;type&quot;: &quot;html&quot;,</span><br><span class="line">  &quot;mode&quot;: &quot;on_change&quot;,</span><br><span class="line">  &quot;extract&quot;: &#123;</span><br><span class="line">    &quot;title&quot;: &#123;</span><br><span class="line">      &quot;css&quot;: &quot;.repo-list .v-align-middle&quot;,</span><br><span class="line">      &quot;value&quot;: &quot;text()&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;url&quot;: &#123;</span><br><span class="line">      &quot;css&quot;: &quot;.repo-list .v-align-middle&quot;,</span><br><span class="line">      &quot;value&quot;: &quot;@href&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;desc&quot;: &#123;</span><br><span class="line">      &quot;css&quot;: &quot;.repo-list  .mb-1&quot;,</span><br><span class="line">      &quot;value&quot;: &quot;text()&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;stars&quot;: &#123;</span><br><span class="line">      &quot;css&quot;: &quot;.repo-list .mr-3 .Link--muted&quot;,</span><br><span class="line">      &quot;value&quot;: &quot;text()&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用xpath进行元素定位取值:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;expected_update_period_in_days&quot;: &quot;2&quot;,</span><br><span class="line">  &quot;url&quot;: &quot;https://github.com/search?o=desc&amp;q=stars%3A%3E10000&amp;s=stars&amp;type=Repositories&quot;,</span><br><span class="line">  &quot;type&quot;: &quot;html&quot;,</span><br><span class="line">  &quot;mode&quot;: &quot;on_change&quot;,</span><br><span class="line">  &quot;extract&quot;: &#123;</span><br><span class="line">    &quot;title&quot;: &#123;</span><br><span class="line">      &quot;xpath&quot;: &quot;//*[@id=\&quot;js-pjax-container\&quot;]/div/div[3]/div/ul/li[*]/div[2]/div[1]/div[1]/a&quot;,</span><br><span class="line">      &quot;value&quot;: &quot;string(.)&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">   &quot;url&quot;: &#123;</span><br><span class="line">     &quot;xpath&quot;: &quot;//*[@id=\&quot;js-pjax-container\&quot;]/div/div[3]/div/ul/li[*]/div[2]/div[1]/div[1]/a&quot;,</span><br><span class="line">      &quot;value&quot;: &quot;@href&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;desc&quot;: &#123;</span><br><span class="line">      &quot;xpath&quot;: &quot;//*[@id=\&quot;js-pjax-container\&quot;]/div/div[3]/div/ul/li[*]/div[2]/p&quot;,</span><br><span class="line">      &quot;value&quot;: &quot;normalize-space(.)&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;stars&quot;: &#123;</span><br><span class="line">      &quot;xpath&quot;: &quot;//*[@id=\&quot;js-pjax-container\&quot;]/div/div[3]/div/ul/li[*]/div[2]/div[2]/div/div[1]/a&quot;,</span><br><span class="line">      &quot;value&quot;: &quot;normalize-space(.)&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>title和url,desc，stars表示对抓取字段映射的名称，可随意命名；</li>
<li>属性用@属性名进行取值 @href表示抓取对应css标签的href属性值，还有@src，@title等等；</li>
<li>如果要抓取对应标签的值，可填<code>.</code>(包括html代码的全部内容），<code>string(.)</code>（只包含对应标签的值），text()等同string(.)</li>
<li>normalize-space是xpath的语法可以去除多余的空格。</li>
</ul>
</blockquote>
<ul>
<li>3.调试，点击dry run:<br><img src="/images/298fb84a00dce923ec6c1ed25dafe46f.webp" alt="image.png"></li>
<li>4.可以看到我们抓取到的数据了:<br><img src="/images/70c017fe24bc055ad7b8d4a3abf08b4a.webp" alt="image.png"></li>
</ul>
<p>然后点击save保存，保存后run一下，然后就会有生产出很多events，就是获取到的数据。如果没有获取到可能是数据库的问题。这里我们已经抓到Github列表页的数据了，下面我们根据列表页抓到的的Url取去抓详情页的数据。</p>
<h3 id="2-创建Agent抓取GIthub项目的详情页"><a href="#2-创建Agent抓取GIthub项目的详情页" class="headerlink" title="2.创建Agent抓取GIthub项目的详情页"></a>2.创建Agent抓取GIthub项目的详情页</h3><h4 id="新建详情页的Agent"><a href="#新建详情页的Agent" class="headerlink" title="新建详情页的Agent"></a>新建详情页的Agent</h4><p>同样的，Type选择<code>Website Agent</code>，由于详情是需要依赖列表中跳转详情的列表链接，Sources选中刚才创建的列表Agent，选择框勾选好:<br><img src="/images/74de2e70147d735687b12c03afb83138.webp" alt="image.png"></p>
<h4 id="根据依赖的Agent获取详情页数据"><a href="#根据依赖的Agent获取详情页数据" class="headerlink" title="根据依赖的Agent获取详情页数据"></a>根据依赖的Agent获取详情页数据</h4>
{{url}}即第一个Agent传过来的超链接参数，需要用到第一个agent的参数需要用{{}}包起来就可以了，这里mode一定填写merge，这样两个Agent的字段就组合到一起了:
![image.png](/images/6790c781a366989f078a70f7a3bebef7.webp)

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;expected_update_period_in_days&quot;: &quot;2&quot;,</span><br><span class="line">  &quot;url&quot;: &quot;https://github.com&#123;&#123;url&#125;&#125;&quot;,</span><br><span class="line">  &quot;type&quot;: &quot;html&quot;,</span><br><span class="line">  &quot;mode&quot;: &quot;merge&quot;,</span><br><span class="line">  &quot;extract&quot;: &#123;</span><br><span class="line">    &quot;hovertext&quot;: &#123;</span><br><span class="line">      &quot;css&quot;: &quot;html&quot;,</span><br><span class="line">      &quot;value&quot;: &quot;.&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="调试详情页Agent"><a href="#调试详情页Agent" class="headerlink" title="调试详情页Agent"></a>调试详情页Agent</h4><p>同样的选择一个接受到的event测试一下<br><img src="/images/8e538cc2b6c97611c4429db9119cfa2a.webp" alt="image.png"></p>
<p>可以看到数据已经组合起来了:<br><img src="/images/7eb651b6b464156e743298205d9049e6.webp" alt="image.png"></p>
<h4 id="保存详情页Agent"><a href="#保存详情页Agent" class="headerlink" title="保存详情页Agent"></a>保存详情页Agent</h4><p>点击Save保存，此时我们点击github列表数据Agent的run功能生成数据:</p>
<p><img src="/images/b3106845630beb9ff4fa89e6248126eb.webp" alt="image.png"></p>
<p>查看生成的Events数据:</p>
<p><img src="/images/f40042112b6b590eef73431cf1331e0d.webp" alt="image.png"></p>
<p>可以看到列表Agent的时候也将详情的Agent进行执行了，并且将数据合并生成:</p>
<p><img src="/images/709a1591d58d37193205625db01a1db9.webp" alt="image.png"></p>
<h3 id="3-创建输出成RSS数据的Agent"><a href="#3-创建输出成RSS数据的Agent" class="headerlink" title="3.创建输出成RSS数据的Agent"></a>3.创建输出成RSS数据的Agent</h3><h4 id="新建Rss输出的Agent"><a href="#新建Rss输出的Agent" class="headerlink" title="新建Rss输出的Agent"></a>新建Rss输出的Agent</h4><p>Type选择Data output Agent<br><img src="/images/a579f44f180b7cfd4d11d5a314870148.webp" alt="image.png"></p>
<h4 id="依赖详情页Agent"><a href="#依赖详情页Agent" class="headerlink" title="依赖详情页Agent"></a>依赖详情页Agent</h4><p>Sources选择详情页Agent，secrets填写RSS地址自定义的末尾名称，item下就是RSS中的每一条信息了，填写上对应参数，其他默认即可。最后点击保存<br><img src="/images/e356baf88a22c109a25679aef39b287d.webp" alt="image.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;secrets&quot;: [</span><br><span class="line">    &quot;Github&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;expected_receive_period_in_days&quot;: 2,</span><br><span class="line">  &quot;template&quot;: &#123;</span><br><span class="line">    &quot;title&quot;: &quot;Github点赞数前十名排行榜&quot;,</span><br><span class="line">    &quot;description&quot;: &quot;本数据来自于GitHub官方&quot;,</span><br><span class="line">    &quot;item&quot;: &#123;</span><br><span class="line">      &quot;title&quot;: &quot;&#123;&#123;title&#125;&#125;&quot;,</span><br><span class="line">      &quot;description&quot;: &quot;Secret hovertext: &#123;&#123;hovertext&#125;&#125;&quot;,</span><br><span class="line">      &quot;link&quot;: &quot;&#123;&#123;url&#125;&#125;&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;ns_media&quot;: &quot;true&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>至此，一个专属RSS源就已生成</p>
<h4 id="添加到Rss源到Rss阅读器"><a href="#添加到Rss源到Rss阅读器" class="headerlink" title="添加到Rss源到Rss阅读器"></a>添加到Rss源到Rss阅读器</h4><p>点击Agent<br><img src="/images/e4d757b9af70bd8850b6d3284ab749f3.webp" alt="image-20220419231802798.png"><br>点击Agent就能看到下图所示，把它添加到RSS阅读器上去吧。<br><img src="/images/f0d471b7cca9b354bda6c6ff1a51d000.webp" alt="image.png"><br>后续只要定时或者是手动执行第一个获取列表数据的Agent就回去执行后续的两个Agent生成Rss数据源，通过RSS阅读器进行订阅我们就可以看到抓取的信息流了。</p>
<h1 id="六-补充知识Html元素定位"><a href="#六-补充知识Html元素定位" class="headerlink" title="六.补充知识Html元素定位"></a>六.补充知识Html元素定位</h1><p>上文中笔者使用了Css选择器来定位元素，关于在HTML中定位元素常用的方式有三种正则表达式，xpath提取，css选择器。之前笔者在Python爬虫的相关文章中也有专门的讲解，有兴趣的同学欢迎前去考古。</p>
<h3 id="1-Css选择器定位元素"><a href="#1-Css选择器定位元素" class="headerlink" title="1.Css选择器定位元素"></a>1.Css选择器定位元素</h3><p>在 CSS 中，选择器是一种模式，用于选择需要添加样式的元素。Css的定位更灵活，因为他它用到的更多的匹配符和规格。”CSS” 列指示该属性是在哪个 CSS 版本中定义的。（CSS1、CSS2 还是 CSS3。）</p>
<table>
<thead>
<tr>
<th>选择器</th>
<th>例子</th>
<th>例子描述</th>
<th>CSS</th>
</tr>
</thead>
<tbody><tr>
<td>.class</td>
<td>.intro</td>
<td>选择 class&#x3D;”intro” 的所有元素。</td>
<td>1</td>
</tr>
<tr>
<td>#id</td>
<td>#firstname</td>
<td>选择 id&#x3D;”firstname” 的所有元素。</td>
<td>1</td>
</tr>
<tr>
<td>*</td>
<td>*</td>
<td>选择所有元素。</td>
<td>2</td>
</tr>
<tr>
<td>element</td>
<td>p</td>
<td>选择所有 <p> 元素。</td>
<td>1</td>
</tr>
<tr>
<td>element,element</td>
<td>div,p</td>
<td>选择所有 <div> 元素和所有 <p> 元素。</td>
<td>1</td>
</tr>
<tr>
<td>element element</td>
<td>div p</td>
<td>选择 <div> 元素内部的所有 <p> 元素。</td>
<td>1</td>
</tr>
<tr>
<td>element&gt;element</td>
<td>div&gt;p</td>
<td>选择父元素为 <div> 元素的所有 <p> 元素。</td>
<td>2</td>
</tr>
<tr>
<td>element+element</td>
<td>div+p</td>
<td>选择紧接在 <div> 元素之后的所有 <p> 元素。</td>
<td>2</td>
</tr>
<tr>
<td>[attribute]</td>
<td>[target]</td>
<td>选择带有 target 属性所有元素。</td>
<td>2</td>
</tr>
<tr>
<td>[attribute&#x3D;value]</td>
<td>[target&#x3D;_blank]</td>
<td>选择 target&#x3D;”_blank” 的所有元素。</td>
<td>2</td>
</tr>
<tr>
<td>[attribute~&#x3D;value]</td>
<td>[title~&#x3D;flower]</td>
<td>选择 title 属性包含单词 “flower” 的所有元素。</td>
<td>2</td>
</tr>
<tr>
<td>[attribute|&#x3D;value]</td>
<td>[lang|&#x3D;en]</td>
<td>选择 lang 属性值以 “en” 开头的所有元素。</td>
<td>2</td>
</tr>
<tr>
<td>:link</td>
<td>a:link</td>
<td>选择所有未被访问的链接。</td>
<td>1</td>
</tr>
<tr>
<td>:visited</td>
<td>a:visited</td>
<td>选择所有已被访问的链接。</td>
<td>1</td>
</tr>
<tr>
<td>:active</td>
<td>a:active</td>
<td>选择活动链接。</td>
<td>1</td>
</tr>
<tr>
<td>:hover</td>
<td>a:hover</td>
<td>选择鼠标指针位于其上的链接。</td>
<td>1</td>
</tr>
<tr>
<td>:focus</td>
<td>input:focus</td>
<td>选择获得焦点的 input 元素。</td>
<td>2</td>
</tr>
<tr>
<td>:first-letter</td>
<td>p:first-letter</td>
<td>选择每个 <p> 元素的首字母。</td>
<td>1</td>
</tr>
<tr>
<td>:first-line</td>
<td>p:first-line</td>
<td>选择每个 <p> 元素的首行。</td>
<td>1</td>
</tr>
<tr>
<td>:first-child</td>
<td>p:first-child</td>
<td>选择属于父元素的第一个子元素的每个 <p> 元素。</td>
<td>2</td>
</tr>
<tr>
<td>:before</td>
<td>p:before</td>
<td>在每个 <p> 元素的内容之前插入内容。</td>
<td>2</td>
</tr>
<tr>
<td>:after</td>
<td>p:after</td>
<td>在每个 <p> 元素的内容之后插入内容。</td>
<td>2</td>
</tr>
<tr>
<td>:lang(language)</td>
<td>p:lang(it)</td>
<td>选择带有以 “it” 开头的 lang 属性值的每个 <p> 元素。</td>
<td>2</td>
</tr>
<tr>
<td>element1~element2</td>
<td>p~ul</td>
<td>选择前面有 <p> 元素的每个 <ul> 元素。</td>
<td>3</td>
</tr>
<tr>
<td>[attribute^&#x3D;value]</td>
<td>a[src^&#x3D;”https”]</td>
<td>选择其 src 属性值以 “https” 开头的每个 <a> 元素。</td>
<td>3</td>
</tr>
<tr>
<td>[attribute$&#x3D;value]</td>
<td>a[src$&#x3D;”.pdf”]</td>
<td>选择其 src 属性以 “.pdf” 结尾的所有 <a> 元素。</td>
<td>3</td>
</tr>
<tr>
<td>[attribute*&#x3D;value]</td>
<td>a[src*&#x3D;”abc”]</td>
<td>选择其 src 属性中包含 “abc” 子串的每个 <a> 元素。</td>
<td>3</td>
</tr>
<tr>
<td>:first-of-type</td>
<td>p:first-of-type</td>
<td>选择属于其父元素的首个 <p> 元素的每个 <p> 元素。</td>
<td>3</td>
</tr>
<tr>
<td>:last-of-type</td>
<td>p:last-of-type</td>
<td>选择属于其父元素的最后 <p> 元素的每个 <p> 元素。</td>
<td>3</td>
</tr>
<tr>
<td>:only-of-type</td>
<td>p:only-of-type</td>
<td>选择属于其父元素唯一的 <p> 元素的每个 <p> 元素。</td>
<td>3</td>
</tr>
<tr>
<td>:only-child</td>
<td>p:only-child</td>
<td>选择属于其父元素的唯一子元素的每个 <p> 元素。</td>
<td>3</td>
</tr>
<tr>
<td>:nth-child(n)</td>
<td>p:nth-child(2)</td>
<td>选择属于其父元素的第二个子元素的每个 <p> 元素。</td>
<td>3</td>
</tr>
<tr>
<td>:nth-last-child(n)</td>
<td>p:nth-last-child(2)</td>
<td>同上，从最后一个子元素开始计数。</td>
<td>3</td>
</tr>
<tr>
<td>:nth-of-type(n)</td>
<td>p:nth-of-type(2)</td>
<td>选择属于其父元素第二个 <p> 元素的每个 <p> 元素。</td>
<td>3</td>
</tr>
<tr>
<td>:nth-last-of-type(n)</td>
<td>p:nth-last-of-type(2)</td>
<td>同上，但是从最后一个子元素开始计数。</td>
<td>3</td>
</tr>
<tr>
<td>:last-child</td>
<td>p:last-child</td>
<td>选择属于其父元素最后一个子元素每个 <p> 元素。</td>
<td>3</td>
</tr>
<tr>
<td>:root</td>
<td>:root</td>
<td>选择文档的根元素。</td>
<td>3</td>
</tr>
<tr>
<td>:empty</td>
<td>p:empty</td>
<td>选择没有子元素的每个 <p> 元素（包括文本节点）。</td>
<td>3</td>
</tr>
<tr>
<td>:target</td>
<td>#news:target</td>
<td>选择当前活动的 #news 元素。</td>
<td>3</td>
</tr>
<tr>
<td>:enabled</td>
<td>input:enabled</td>
<td>选择每个启用的 <input> 元素。</td>
<td>3</td>
</tr>
<tr>
<td>:disabled</td>
<td>input:disabled</td>
<td>选择每个禁用的 <input> 元素</td>
<td>3</td>
</tr>
<tr>
<td>:checked</td>
<td>input:checked</td>
<td>选择每个被选中的 <input> 元素。</td>
<td>3</td>
</tr>
<tr>
<td>:not(selector)</td>
<td>:not(p)</td>
<td>选择非 <p> 元素的每个元素。</td>
<td>3</td>
</tr>
<tr>
<td>::selection</td>
<td>::selection</td>
<td>选择被用户选取的元素部分。</td>
<td>3</td>
</tr>
</tbody></table>
<p>CSS选择器有很多，像标签选择器、类选择器、ID选择器、关系选择器、伪类选择器、分组选择器等等，但是只需要掌握常用的几种就可以满足定位元素的需求。</p>
<p>以下述HTML为例，总结下CSS选择器的用法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;menu&quot; class=&quot;menu&quot; title=&quot;menu&quot;&gt;</span><br><span class="line">	&lt;ul&gt;</span><br><span class="line">		&lt;li id=&quot;first&quot; class=&quot;catagory book&quot;&gt;</span><br><span class="line">			&lt;a id=&quot;book&quot;&gt;</span><br><span class="line">			&lt;/a&gt;</span><br><span class="line">		&lt;/li&gt;</span><br><span class="line">		&lt;li id=&quot;second&quot; class=&quot;catagory food&quot;&gt;</span><br><span class="line">			&lt;a id=&quot;food&quot;&gt;</span><br><span class="line">			&lt;/a&gt;</span><br><span class="line">		&lt;/li&gt;</span><br><span class="line">		&lt;li&gt;</span><br><span class="line">			&lt;a id=&quot;clothes&quot;&gt;</span><br><span class="line">			&lt;/a&gt;</span><br><span class="line">		&lt;/li&gt;</span><br><span class="line">		&lt;li title=&quot;submenu&quot;&gt;</span><br><span class="line">			&lt;a id=&quot;furniture&quot;&gt;</span><br><span class="line">			&lt;/a&gt;</span><br><span class="line">		&lt;/li&gt;</span><br><span class="line">	&lt;/ul&gt;</span><br><span class="line">	&lt;a href=&quot;....&quot;&gt;</span><br><span class="line">		Welcome to Our Store</span><br><span class="line">	&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>标签选择器<br>使用HTML标签来选择元素，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">driver.findElement(By.cssSelector(&quot;li&quot;));   //将选择所有li元素</span><br><span class="line">driver.findElement(By.cssSelector(&quot;*a*&quot;)); //将选择所有a元素</span><br></pre></td></tr></table></figure></li>
<li><p>类选择器<br>使用类名来选择元素，使用方法：.class， 例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">driver.findElement(By.cssSelector(&quot;div.menu&quot;)); //将选择class为menu的div元素</span><br><span class="line">driver.findElement(By.cssSelector(&quot;.catagory&quot;)); //将选择id为first的元素和id为second的元素，因为这两个元素的class里都含有catagory</span><br></pre></td></tr></table></figure></li>
<li><p>ID选择器<br>使用ID来选择元素，使用方法：#id，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.findElement(By.cssSelector(&quot;a#clothes&quot;)); //将选择id为clothes的a元素</span><br></pre></td></tr></table></figure>
<p>也可以写成：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.findElement(By.cssSelector(&quot;#clothes&quot;)); //因为id是唯一的所以还是会选择id为clothes的a元素</span><br></pre></td></tr></table></figure></li>
<li><p>关系选择器<br><strong>div,p</strong> 作用：选择所有div元素和p元素<br><strong>div&gt;p</strong> 作用：选择div的直接子元素中的所有p元素<br><strong>div p</strong>   作用：选择div的后代元素中的所有p元素</p>
</li>
<li><p>属性选择器<br><strong>[title]</strong>   作用：选择所有具有title属性的元素<br><strong>[title&#x3D;’menu’]</strong>   作用：选择所有title属性值等于’menu’的元素<br><strong>[title~&#x3D;’menu’]</strong>   作用：选择所有title属性值包含menu的元素，注意：menu必须是一个word，且有空格与其他单词分开<br><em><em>[title</em>&#x3D;’menu’]</em>*   作用：选择所有title属性值包含menu的元素，注意：此时menu为substring，而不是word<br>**[title|&#x3D;’menu’]   **作用：选择所有title属性值以menu开头或者等于menu的元素<br><strong>[title^&#x3D;’menu’]</strong>   作用：选择所有title属性值以menu开头的元素<br><strong>[title$&#x3D;’menu’]</strong>   作用：选择所有title属性值以menu结尾的元素<br><strong>div[title&#x3D;’menu’]</strong>   作用： 选择所有title属性值等于menu的div元素</p>
</li>
<li><p>通用选择器<br>方法：*</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div ul *; //选择div ul 下的所有子元素，包括li和a元素</span><br></pre></td></tr></table></figure></li>
<li><p>伪类选择器<br>伪类选择器很多，只总结下用过的:nth-child(n)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p:nth-child(2) 作用：选择作为第二孩子的p元素</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="2-Xpath定位元素"><a href="#2-Xpath定位元素" class="headerlink" title="2.Xpath定位元素"></a>2.Xpath定位元素</h3><p>XPath 是一门在 XML 文档中查找信息的语言。XPath 可用来在 XML 文档中对元素和属性进行遍历。XPath 使用路径表达式来选取 XML 文档中的节点或者节点集。这些路径表达式和我们在常规的电脑文件系统中看到的表达式非常相似。XPath 含有超过 100 个内建的函数。这些函数用于字符串值、数值、日期和时间比较、节点和 QName 处理、序列处理、逻辑值等等。. 在 XPath 中，有七种类型的节点：元素、属性、文本、命名空间、处理指令、注释以及文档节点（或称为根节点）。<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=XML&spm=1001.2101.3001.7020">XML</a> 文档是被作为节点树来对待的。树的根被称为文档节点或者根节点。详情请参考<a target="_blank" rel="noopener" href="https://www.w3school.com.cn/xpath/index.asp">XPath 教程 (w3school.com.cn)</a></p>
<h3 id="3-定位元素总结"><a href="#3-定位元素总结" class="headerlink" title="3.定位元素总结"></a>3.定位元素总结</h3><p>在浏览器中按F12打开开发者工具，然后选择你要的元素，<strong>右键</strong>选择 <strong>Inspect</strong>。可以看到 审查元素信息已经出来了。<strong>右键</strong>选择之后然后复制。我们既可以复制成Xpath的也可以复制成Css选择器的路径。</p>
<h1 id="七-Huginn总结"><a href="#七-Huginn总结" class="headerlink" title="七.Huginn总结"></a>七.Huginn总结</h1><p>Huginn可以订阅任意你想要订阅的网站与平台，例如微信公众号、简书、知乎、博客、图虫、等等，只要有网页同时生成了CSS，你就可以派出你的“Agent”去把他们抓回来，然后将他们“分门别类”，任意处置了。Huginn的门槛就在于环境的部署以及Website Agent规则的制定。虽然说Huginn有scenarios可供导入导出，但是目前为止还没有一个大规模的scenarios库，所以Huginn普及是非常困难的。目前，大家可以在这里找到几个可供使用的脚本库：<a target="_blank" rel="noopener" href="http://huginnio.herokuapp.com/scenarios%E3%80%82">http://huginnio.herokuapp.com/scenarios。</a></p>
<p>参考资料:</p>
<p><a target="_blank" rel="noopener" href="https://github.com/huginn/huginn">huginn&#x2F;huginn: Create agents that monitor and act on your behalf. Your agents are standing by! (github.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/75730603">上手huginn的第一篇教程：一个定时监控黄金价格的rss - 知乎 (zhihu.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/80725216">简单上手的huginn教程（2）——将抓取的内容推送至微信 - 知乎 (zhihu.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/83507407">简单上手的huginn教程（3）——对监控的时间进行更精确的控制 - 知乎 (zhihu.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://www.vpsjxw.com/vps_use/huginn_intro/">huginn|全网数据监控与通知工具—安装教程、全方位介绍 | VPS精选网 (vpsjxw.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://www.52maicong.com/shiyong/8314.html">利用Huginn抓取任意网站RSS和微信公众号更新-打造一站式信息阅读平台 | 麦田一棵葱 (52maicong.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/liujiangblog/p/12115804.html">超详细!如何利用Huginn制作专属RSS - 谁是小菜鸡 - 博客园 (cnblogs.com)</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://lxlfpeng.github.io">peng</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://lxlfpeng.github.io/2022/08/28/%E4%BD%BF%E7%94%A8Huginn%E6%89%93%E9%80%A0%E8%87%AA%E5%8A%A8%E5%8C%96%E4%BF%A1%E6%81%AF%E5%A4%84%E7%90%86%E4%B8%AD%E5%BF%83/">https://lxlfpeng.github.io/2022/08/28/%E4%BD%BF%E7%94%A8Huginn%E6%89%93%E9%80%A0%E8%87%AA%E5%8A%A8%E5%8C%96%E4%BF%A1%E6%81%AF%E5%A4%84%E7%90%86%E4%B8%AD%E5%BF%83/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://lxlfpeng.github.io" target="_blank">鹏哥的Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Rss/">Rss</a><a class="post-meta__tags" href="/tags/Huginn/">Huginn</a></div><div class="post-share"><div class="social-share" data-image="/images/about_avatar.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2022/09/01/%E8%87%AA%E5%AE%9A%E4%B9%89Rss%E6%BA%90%E6%AF%94%E8%BE%83/" title="自定义Rss源比较"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">自定义Rss源比较</div></div><div class="info-2"><div class="info-item-1">万物皆可RSS简书荒废有近两年，最近发现一个RSS神器，所以又有了动力写一点东西。前年关于使用RSS订阅微信公众号、知乎、社交网络等，有写几篇文章：  【干货】如何高效地订阅微信公众号 【干货】如何通过 RSS 订阅知乎 【干货】如何通过RSS订阅社交网络  其中，最最主要的方法是使用部署的Huginn去制作相应的RSS，但是，这种方法的学习成本稍高，对不懂编程语言的人不太友好；那么到底有没有更简单的方法呢？果真,Github就出现了这样一个强大的工具——RSSHub。最近花了一点时间研究后发现，这个工具实在是功能强大且使用简单，所以就想一定要推荐给大家。  如果想了解并部署Huginn，可以看我的这篇文章：Huginn 安装教程 — 建立你自己的 IFTTT  1....</div></div></div></a><a class="pagination-related" href="/2022/08/25/%E4%BD%BF%E7%94%A8Feed43%E4%B8%BA%E7%BD%91%E9%A1%B5%E7%94%9F%E6%88%90RSS%E8%AE%A2%E9%98%85%E6%BA%90/" title="使用Feed43为网页生成RSS订阅源"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">使用Feed43为网页生成RSS订阅源</div></div><div class="info-2"><div class="info-item-1">简介在我们使用Rss时候发现很多的网站并不支持Rss服务，如果自己使用Rsshub，Huginn等搭建订阅源，不单单需要懂一些编程和服务器部署的知识，还需要买服务器。如果只是轻度的使用那么完全可以试试FEED43，通过FEED43提供的免费服务可以为静态网页生成订阅源。 步骤总览 准备好需要解析的网站网址(必须是服务端渲染页面网站，也就是常说的静态网页)。 注册好Feed43的账号，并登录。 使用Feed43解析网页源码。 分析网页源码，找到哪一动态部分内容是自己需要的。 根据分析出来的自己需要获取的动态内容编写提取规则。 根据提取出来的内容调整优化提取规则。 将提取出来的内容匹配到信息流。 生成Rss订阅源，完成订阅。  准备好网址这里我们用电脑爱好者这个网站，我们需要爬取这一个列表里面的内容。  必须是服务端渲染页面网站，也就是常说的静态网页。网页端渲染的页面是无法获取内容的。  注册账号 Feed43官网注册好账号。 打开Feed43官方网站，点击Create your first RSS feed。  使用Feed43解析出网页源码 填入网址进行解析:  点击...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2022/09/01/%E8%87%AA%E5%AE%9A%E4%B9%89Rss%E6%BA%90%E6%AF%94%E8%BE%83/" title="自定义Rss源比较"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-01</div><div class="info-item-2">自定义Rss源比较</div></div><div class="info-2"><div class="info-item-1">万物皆可RSS简书荒废有近两年，最近发现一个RSS神器，所以又有了动力写一点东西。前年关于使用RSS订阅微信公众号、知乎、社交网络等，有写几篇文章：  【干货】如何高效地订阅微信公众号 【干货】如何通过 RSS 订阅知乎 【干货】如何通过RSS订阅社交网络  其中，最最主要的方法是使用部署的Huginn去制作相应的RSS，但是，这种方法的学习成本稍高，对不懂编程语言的人不太友好；那么到底有没有更简单的方法呢？果真,Github就出现了这样一个强大的工具——RSSHub。最近花了一点时间研究后发现，这个工具实在是功能强大且使用简单，所以就想一定要推荐给大家。  如果想了解并部署Huginn，可以看我的这篇文章：Huginn 安装教程 — 建立你自己的 IFTTT  1....</div></div></div></a><a class="pagination-related" href="/2022/08/25/%E4%BD%BF%E7%94%A8Feed43%E4%B8%BA%E7%BD%91%E9%A1%B5%E7%94%9F%E6%88%90RSS%E8%AE%A2%E9%98%85%E6%BA%90/" title="使用Feed43为网页生成RSS订阅源"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-25</div><div class="info-item-2">使用Feed43为网页生成RSS订阅源</div></div><div class="info-2"><div class="info-item-1">简介在我们使用Rss时候发现很多的网站并不支持Rss服务，如果自己使用Rsshub，Huginn等搭建订阅源，不单单需要懂一些编程和服务器部署的知识，还需要买服务器。如果只是轻度的使用那么完全可以试试FEED43，通过FEED43提供的免费服务可以为静态网页生成订阅源。 步骤总览 准备好需要解析的网站网址(必须是服务端渲染页面网站，也就是常说的静态网页)。 注册好Feed43的账号，并登录。 使用Feed43解析网页源码。 分析网页源码，找到哪一动态部分内容是自己需要的。 根据分析出来的自己需要获取的动态内容编写提取规则。 根据提取出来的内容调整优化提取规则。 将提取出来的内容匹配到信息流。 生成Rss订阅源，完成订阅。  准备好网址这里我们用电脑爱好者这个网站，我们需要爬取这一个列表里面的内容。  必须是服务端渲染页面网站，也就是常说的静态网页。网页端渲染的页面是无法获取内容的。  注册账号 Feed43官网注册好账号。 打开Feed43官方网站，点击Create your first RSS feed。  使用Feed43解析出网页源码 填入网址进行解析:  点击...</div></div></div></a><a class="pagination-related" href="/2022/08/22/%E4%BD%BF%E7%94%A8Python(PyRSS2Gen)%E5%88%B6%E4%BD%9CRSS%E6%BA%90/" title="使用Python(PyRSS2Gen)制作RSS源"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-22</div><div class="info-item-2">使用Python(PyRSS2Gen)制作RSS源</div></div><div class="info-2"><div class="info-item-1">一.Rss订阅源的本质要通过代码生成Rss订阅源，首先应该了解Rss订阅源到底是什么东西。 1.分析Rss订阅源我们打开少数派官方提供给我们的Rss订阅源，保存网页可以看到Rss订阅源本质上就是一个储存在文件服务器里面的Xml文件。 2.Rss订阅源的结构打开xml文件，结构如下: 12345678910111213141516171819202122232425262728293031323334353637&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;rss    xmlns:atom=&quot;http://www.w3.org/2005/Atom&quot;    xmlns:dc=&quot;http://purl.org/dc/elements/1.1/&quot; version=&quot;2.0&quot;&gt;    &lt;channel&gt;        &lt;title&gt;少数派&lt;/title&gt;       ...</div></div></div></a><a class="pagination-related" href="/2022/08/20/%E4%BD%BF%E7%94%A8RssHub%E4%B8%BA%E7%BD%91%E9%A1%B5%E7%94%9F%E6%88%90RSS%E8%AE%A2%E9%98%85%E6%BA%90/" title="使用RssHub为网页生成RSS订阅源"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-20</div><div class="info-item-2">使用RssHub为网页生成RSS订阅源</div></div><div class="info-2"><div class="info-item-1">一.RSSHub简介众所周知，网站提供 RSS 并不能为他的站点带来更多的流量，反而会减少主站的访客数。因此很多的网站没有提供Rss订阅源供大家使用。 RSSHub就是这样的一款神器，借助 RSSHub 可以方便地通过 RSS 订阅知乎、豆瓣、Facebook 等现代媒体社交平台。RSSHub RSSHub 是一个开源、简单易用、易于扩展的 RSS 生成器，可以给任何奇奇怪怪的内容生成 RSS 订阅源。 RSSHub 借助于开源社区的力量快速发展中，聚集了众多 RSS 爱好者来为现代的网站构建 RSS 订阅源，目前已适配数百家网站的上千项内容。  GitHub开源地址：https://github.com/DIYgod/RSSHub 官方文档：https://docs.rsshub.app/usage.html#sheng-cheng-ding-yue-yuan 部署文档：https://docs.rsshub.app/install/ 可以配合浏览器扩展 RSSHub Radar 和 移动端辅助 App RSSBud (iOS) 与 RSSAid (Android)...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/images/about_avatar.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">peng</div><div class="author-info-description">过往不恋 未来不迎 当下不负</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">127</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">59</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">24</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/lxlfpeng"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/lxlfpeng" target="_blank" title="Github"><i class="fab fa-github" style="color: #4a7dbe;"></i></a><a class="social-icon" href="mailto:565289282@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80-Huginn%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">一.Huginn简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%9A%E5%88%B6%E5%8C%96%E6%8E%A8%E9%80%81%E6%88%96%E6%8F%90%E9%86%92"><span class="toc-number">1.0.1.</span> <span class="toc-text">1.定制化推送或提醒</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%81%9A%E5%90%88%E6%95%B0%E6%8D%AE"><span class="toc-number">1.0.2.</span> <span class="toc-text">2.聚合数据</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C-%E5%AE%89%E8%A3%85Huginn"><span class="toc-number">2.</span> <span class="toc-text">二.安装Huginn</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%B8%B8%E8%A7%84%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85Huginn"><span class="toc-number">2.0.1.</span> <span class="toc-text">1.常规手动安装Huginn</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Docker%E5%AE%89%E8%A3%85Huginn-%E6%8E%A8%E8%8D%90"><span class="toc-number">2.0.2.</span> <span class="toc-text">2.Docker安装Huginn(推荐)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Huginn%E6%9B%B4%E6%8D%A2Mysql%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.0.3.</span> <span class="toc-text">3.Huginn更换Mysql数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%B0%86huginn%E9%83%A8%E7%BD%B2%E5%88%B0-Heroku"><span class="toc-number">2.0.4.</span> <span class="toc-text">4.将huginn部署到 Heroku</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2%E5%88%B0Heroku%E7%9A%84%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span class="toc-number">2.0.4.0.1.</span> <span class="toc-text">部署到Heroku的操作步骤：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%87%AA%E5%B7%B1%E7%9A%84%E9%82%AE%E7%AE%B1%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">2.0.4.0.2.</span> <span class="toc-text">使用自己的邮箱服务器</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89-Huginn%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">3.</span> <span class="toc-text">三.Huginn基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Agent%EF%BC%9A"><span class="toc-number">3.0.1.</span> <span class="toc-text">1.Agent：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Scenario%EF%BC%9A"><span class="toc-number">3.0.2.</span> <span class="toc-text">2.Scenario：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Event%EF%BC%9A"><span class="toc-number">3.0.3.</span> <span class="toc-text">3.Event：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B-%E5%85%A5%E9%97%A8%E5%AE%9E%E4%BE%8B-Huginn%E4%B8%8B%E9%9B%A8%E5%A4%A9%E9%80%9A%E7%9F%A5%E5%B8%A6%E9%9B%A8%E5%85%B7"><span class="toc-number">4.</span> <span class="toc-text">四.入门实例-Huginn下雨天通知带雨具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E6%8A%93%E5%8F%96%E5%A4%A9%E6%B0%94%E6%95%B0%E6%8D%AE%E7%9A%84Agent"><span class="toc-number">4.0.1.</span> <span class="toc-text">1.创建抓取天气数据的Agent</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAAgent%E4%BB%A3%E7%90%86"><span class="toc-number">4.0.1.1.</span> <span class="toc-text">创建Agent代理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E4%BB%A3%E7%90%86%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.0.1.2.</span> <span class="toc-text">选择代理类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF%E5%A1%AB%E5%86%99"><span class="toc-number">4.0.1.3.</span> <span class="toc-text">基本信息填写</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Options-%E9%85%8D%E7%BD%AE%E5%A1%AB%E5%86%99"><span class="toc-number">4.0.1.4.</span> <span class="toc-text">Options 配置填写</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%BF%87%E6%BB%A4%E5%A4%A9%E6%B0%94%E6%95%B0%E6%8D%AEAgent"><span class="toc-number">4.0.2.</span> <span class="toc-text">2.过滤天气数据Agent</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BATriggerAgents"><span class="toc-number">4.0.2.1.</span> <span class="toc-text">创建TriggerAgents</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Agents%E9%85%8D%E7%BD%AE%E5%A1%AB%E5%86%99"><span class="toc-number">4.0.2.2.</span> <span class="toc-text">Agents配置填写</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%80%9A%E7%9F%A5%E7%94%A8%E6%88%B7%E7%9A%84Agent"><span class="toc-number">4.0.3.</span> <span class="toc-text">3.通知用户的Agent</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94-%E8%BF%9B%E9%98%B6%E5%AE%9E%E4%BE%8B%E6%8A%93%E5%8F%96Github%E7%82%B9%E8%B5%9E%E6%9C%80%E5%A4%9A%E7%9A%84%E9%A1%B9%E7%9B%AE%E5%88%97%E8%A1%A8%E7%94%9F%E6%88%90Rss"><span class="toc-number">5.</span> <span class="toc-text">五.进阶实例抓取Github点赞最多的项目列表生成Rss</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BAAgent%E6%8A%93%E5%8F%96%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="toc-number">5.0.1.</span> <span class="toc-text">1.创建Agent抓取列表数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E5%88%97%E8%A1%A8%E9%A1%B5%E7%9A%84Agent"><span class="toc-number">5.0.1.1.</span> <span class="toc-text">新建列表页的Agent</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E4%BB%A3%E7%90%86%E7%B1%BB%E5%9E%8B-1"><span class="toc-number">5.0.1.2.</span> <span class="toc-text">选择代理类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF%E5%A1%AB%E5%86%99-1"><span class="toc-number">5.0.1.3.</span> <span class="toc-text">基本信息填写</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%9B%E5%BB%BAAgent%E6%8A%93%E5%8F%96GIthub%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%AF%A6%E6%83%85%E9%A1%B5"><span class="toc-number">5.0.2.</span> <span class="toc-text">2.创建Agent抓取GIthub项目的详情页</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E8%AF%A6%E6%83%85%E9%A1%B5%E7%9A%84Agent"><span class="toc-number">5.0.2.1.</span> <span class="toc-text">新建详情页的Agent</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E4%BE%9D%E8%B5%96%E7%9A%84Agent%E8%8E%B7%E5%8F%96%E8%AF%A6%E6%83%85%E9%A1%B5%E6%95%B0%E6%8D%AE"><span class="toc-number">5.0.2.2.</span> <span class="toc-text">根据依赖的Agent获取详情页数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B0%83%E8%AF%95%E8%AF%A6%E6%83%85%E9%A1%B5Agent"><span class="toc-number">5.0.2.3.</span> <span class="toc-text">调试详情页Agent</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%9D%E5%AD%98%E8%AF%A6%E6%83%85%E9%A1%B5Agent"><span class="toc-number">5.0.2.4.</span> <span class="toc-text">保存详情页Agent</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%88%9B%E5%BB%BA%E8%BE%93%E5%87%BA%E6%88%90RSS%E6%95%B0%E6%8D%AE%E7%9A%84Agent"><span class="toc-number">5.0.3.</span> <span class="toc-text">3.创建输出成RSS数据的Agent</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%BB%BARss%E8%BE%93%E5%87%BA%E7%9A%84Agent"><span class="toc-number">5.0.3.1.</span> <span class="toc-text">新建Rss输出的Agent</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E8%AF%A6%E6%83%85%E9%A1%B5Agent"><span class="toc-number">5.0.3.2.</span> <span class="toc-text">依赖详情页Agent</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%88%B0Rss%E6%BA%90%E5%88%B0Rss%E9%98%85%E8%AF%BB%E5%99%A8"><span class="toc-number">5.0.3.3.</span> <span class="toc-text">添加到Rss源到Rss阅读器</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD-%E8%A1%A5%E5%85%85%E7%9F%A5%E8%AF%86Html%E5%85%83%E7%B4%A0%E5%AE%9A%E4%BD%8D"><span class="toc-number">6.</span> <span class="toc-text">六.补充知识Html元素定位</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Css%E9%80%89%E6%8B%A9%E5%99%A8%E5%AE%9A%E4%BD%8D%E5%85%83%E7%B4%A0"><span class="toc-number">6.0.1.</span> <span class="toc-text">1.Css选择器定位元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Xpath%E5%AE%9A%E4%BD%8D%E5%85%83%E7%B4%A0"><span class="toc-number">6.0.2.</span> <span class="toc-text">2.Xpath定位元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%AE%9A%E4%BD%8D%E5%85%83%E7%B4%A0%E6%80%BB%E7%BB%93"><span class="toc-number">6.0.3.</span> <span class="toc-text">3.定位元素总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83-Huginn%E6%80%BB%E7%BB%93"><span class="toc-number">7.</span> <span class="toc-text">七.Huginn总结</span></a></li></ol></div></div></div></div></main><footer id="footer" style="background: linear-gradient(20deg, #0062be, #925696, #cc426e, #fb0347);"><div id="footer-wrap"><div class="copyright">&copy;2015 - 2025 By peng</div><div class="footer_custom_text"> <a target="_blank" rel="nofollow noopener"><span>千里之行</span></a> <i class="iconfont icon-love"></i> <a target="_blank" rel="nofollow noopener"><span>始于足下</span></a> </div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.isShuoshuo
  const option = null

  const getGiscusTheme = theme => theme === 'dark' ? 'dark' : 'light'

  const createScriptElement = config => {
    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => {
      ele.setAttribute(key, value)
    })
    return ele
  }

  const loadGiscus = (el = document, key) => {
    const mappingConfig = isShuoshuo
      ? { 'data-mapping': 'specific', 'data-term': key }
      : { 'data-mapping': (option && option['data-mapping']) || 'pathname' }

    const giscusConfig = {
      src: 'https://giscus.app/client.js',
      'data-repo': 'lxlfpeng/blog_comments',
      'data-repo-id': 'R_kgDONYoexA',
      'data-category-id': 'DIC_kwDONYoexM4Ck4JQ',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true,
      ...option,
      ...mappingConfig
    }

    const scriptElement = createScriptElement(giscusConfig)

    el.querySelector('#giscus-wrap').appendChild(scriptElement)

    if (isShuoshuo) {
      window.shuoshuoComment.destroyGiscus = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const changeGiscusTheme = theme => {
    const iframe = document.querySelector('#giscus-wrap iframe')
    if (iframe) {
      const message = {
        giscus: {
          setConfig: {
            theme: getGiscusTheme(theme)
          }
        }
      }
      iframe.contentWindow.postMessage(message, 'https://giscus.app')
    }
  }

  btf.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if (isShuoshuo) {
    'Giscus' === 'Giscus'
      ? window.shuoshuoComment = { loadComment: loadGiscus }
      : window.loadOtherComment = loadGiscus
    return
  }

  if ('Giscus' === 'Giscus' || !false) {
    if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment = loadGiscus
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>